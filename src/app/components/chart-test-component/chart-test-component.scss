/* ================================
   ðŸŒ Chart Layout & Structure
   ================================ */
.chart-wrapper {
  position: relative;
  width: 100%;
  height: calc(100vh - 60px); /* full viewport minus top navbar */
  overflow: visible; /* allow dropdowns & overlays to render */
  display: flex;
  flex-direction: column;
}

/* Ensure root container used in template fills available space and prevents scrollbars */
.trading-view-container {
  width: 100%;
  height: calc(100vh - 60px); /* keep consistent with layout (adjust if navbar height differs) */
  display: flex;
  flex-direction: column;
  overflow: hidden; /* prevent scrollbars from appearing */
}

/* Main chart area */
.chart-area {
  flex: 1 1 auto;
  min-height: 0; /* allow children to size correctly inside flex */
  display: flex;
  flex-direction: column;
}

.chart-container {
  position: relative;
  flex: 1 1 auto;
  width: 100%;
  height: 100%;
  z-index: 1; /* keep chart under overlays/footer */
  overflow: hidden; /* ensure canvas cannot create scrollbars */
}

/* Floating footer overlay */
.chart-footer {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
  justify-content: center;
  padding: 4px 10px;
  background: #fafafa;
  border-top: 1px solid #ccc;
  height: 44px; /* match navbar height */
  z-index: 1000; /* ensure above chart canvas */
  backdrop-filter: blur(4px); /* nice glass effect on iOS */
}

/* ================================
   ðŸŽ› Material Component Styling
   ================================ */

/* Compact Material form fields */
::ng-deep .chart-footer .mat-form-field {
  margin: 0;
  height: 32px;
}

::ng-deep .chart-footer .mat-form-field-infix {
  padding: 0 !important;
  min-height: 32px !important;
  display: flex;
  align-items: center;
}

/* Compact select trigger */
::ng-deep .chart-footer .mat-select-trigger {
  height: 32px;
  display: flex;
  align-items: center;
  font-size: 13px;
}

/* Compact dropdown options */
::ng-deep .mat-mdc-option {
  min-height: 32px !important;
  font-size: 13px;
  padding: 0 12px !important;
  display: flex;
  align-items: center;
}

/* Checkbox scaling */
::ng-deep .chart-footer .mat-mdc-checkbox {
  transform: scale(0.9);
}

/* Overlay container priority (fix for iOS Safari) */
::ng-deep .cdk-overlay-container {
  position: fixed !important;
  z-index: 2000 !important;
}

/* ================================
   ðŸ“ˆ Canvas Touch & Display
   ================================ */
/* Make canvas fill the chart container and prevent overflow/scrollbars.  */
.chart-container canvas,
.chart-container > canvas {
  width: 100% !important; /* ensure canvas does not exceed container */
  height: 100% !important; /* fill available height */
  max-width: 100% !important;
  display: block; /* remove inline-block whitespace issues */
  margin: 0 !important;
  touch-action: none;
  user-select: none;
  -webkit-user-drag: none;
  -webkit-touch-callout: none;
  box-sizing: border-box;
}

/* Defensive: ensure overlays don't introduce scrollbars */
.interaction-overlay,
.loading-overlay {
  pointer-events: none !important;
}

/* Reduce icon size in mat-select / combo box items */
::ng-deep .mat-mdc-option .mat-icon,
::ng-deep .mat-option .mat-icon {
  font-size: 16px !important;
  width: 16px !important;
  height: 16px !important;
  line-height: 16px !important;
  margin-right: 8px !important;
  vertical-align: middle !important;
}

::ng-deep .mat-mdc-option img,
::ng-deep .mat-option img {
  width: 16px !important;
  height: 16px !important;
  object-fit: contain;
  margin-right: 8px !important;
  vertical-align: middle;
}

/* Stronger overrides for mat-select / combo box icons to prevent other styles from making them large */
::ng-deep .mat-mdc-select-panel .mat-mdc-option .mat-icon,
::ng-deep .mat-select-panel .mat-option .mat-icon,
::ng-deep .mat-mdc-select-panel .mat-mdc-option .mat-icon svg,
::ng-deep .mat-select-panel .mat-option .mat-icon svg {
  font-size: 16px !important;
  width: 16px !important;
  height: 16px !important;
  line-height: 16px !important;
  margin-right: 8px !important;
  vertical-align: middle !important;
}

/* Trigger / selected value icon */
::ng-deep .mat-mdc-select-trigger .mat-icon,
::ng-deep .mat-select-trigger .mat-icon,
::ng-deep .mat-mdc-select-trigger .mat-icon svg,
::ng-deep .mat-select-trigger .mat-icon svg,
::ng-deep .mat-mdc-select-trigger .mat-mdc-select-value .mat-icon {
  font-size: 16px !important;
  width: 16px !important;
  height: 16px !important;
  line-height: 16px !important;
}

/* Ensure any inline SVG inside mat-icon is constrained */
::ng-deep .mat-icon svg {
  width: 16px !important;
  height: 16px !important;
}
