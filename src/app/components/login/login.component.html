<div class="login-card">
  <div class="loading-overlay" *ngIf="loggingIn">Loading...</div>
  <header>
    <h2>Inloggen</h2>
  </header>
  <div class="content" @enterLogin>
    <form #loginFormElement [formGroup]="loginForm" (ngSubmit)="login()">
      <div class="error-banner" *ngIf="loginError">{{ loginError }}</div>

      <div class="form-field">
        <label for="usernameInput">Gebruikersnaam</label>
        <input
          #usernameInput
            id="usernameInput"
          type="text"
          formControlName="username"
        />
        <div class="field-error" *ngIf="loginForm.controls.username.hasError('required')">
          Gebruikersnaam vereist
        </div>
        <div class="field-error" *ngIf="loginForm.controls.username.hasError('email')">
          Ongeldige email
        </div>
      </div>

      <div class="form-field">
        <label for="passwordInput">Wachtwoord</label>
        <div class="password-wrapper">
          <input
            #passwordInput
            id="passwordInput"
            [type]="hide ? 'password' : 'text'"
            formControlName="password"
          />
          <button
            type="button"
            class="toggle-btn"
            (click)="hide = !hide"
            [attr.aria-pressed]="hide"
            aria-label="Toggle password visibility"
          >
            {{ hide ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>
        <div class="field-error" *ngIf="loginForm.controls.password.hasError('required')">
          Wachtwoord vereist
        </div>
      </div>

      <button
        #loginButton
        class="primary-btn"
        type="submit"
        [disabled]="loginForm.invalid || loggingIn"
      >
        Inloggen
      </button>
    </form>
  </div>
</div>