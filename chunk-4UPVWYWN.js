import{a as U,c as $,d as q,e as J}from"./chunk-MPIZVA4W.js";import{$a as L,C as E,Ca as A,Da as z,Ea as R,Ha as B,Za as G,_ as N,a as y,aa as D,ab as j,b as k,db as H,e as T,eb as Y,g as F,wa as W,ya as V}from"./chunk-47KEJURJ.js";import{Fb as g,Gb as n,Hb as i,Ib as f,Pb as x,Tb as p,Ub as O,ab as r,gc as o,hc as c,kc as w,lb as d,lc as I,mc as S,qa as C,ra as u,rb as v,rc as b,sc as P,wb as M}from"./chunk-TI3KB3WD.js";function Q(l,_){if(l&1){let t=x();n(0,"mat-card",14),p("click",function(){let e=C(t).$implicit,a=O();return u(a.goToChart(e.Symbol,e.Timeframe))}),n(1,"div",15)(2,"span",16),o(3),i(),n(4,"span",17),o(5),i()(),n(6,"div",18)(7,"mat-chip-listbox",19)(8,"mat-chip"),o(9),i(),n(10,"mat-chip",20),o(11),i()(),n(12,"span",21),o(13),b(14,"date"),i()()()}if(l&2){let t=_.$implicit;r(3),c(t.Symbol),r(2),c(t.Timeframe),r(4),c(t.Status),r(),g("ngClass",t.Direction.toLowerCase()),r(),c(t.Direction),r(2),c(P(14,6,t.CreatedAt,"HH:mm"))}}function X(l,_){if(l&1){let t=x();n(0,"mat-card",14),p("click",function(){let e=C(t).$implicit,a=O();return u(a.goToChart(e.Symbol,e.Timeframe))}),n(1,"div",15)(2,"span",16),o(3),i(),n(4,"span",17),o(5),i()(),n(6,"div",18)(7,"mat-chip-listbox",19)(8,"mat-chip"),o(9),i(),n(10,"mat-chip",20),o(11),i(),n(12,"mat-chip",22),o(13),i(),n(14,"mat-chip"),o(15),i()(),n(16,"span",21),o(17),b(18,"date"),i()()()}if(l&2){let t=_.$implicit;r(3),c(t.Symbol),r(2),c(t.Timeframe),r(4),c(t.Status),r(),g("ngClass",t.Direction.toLowerCase()),r(),c(t.Direction),r(2),c(t.MonitoringStatus),r(2),c(t.EntryOption),r(2),c(P(18,8,t.CreatedAt,"HH:mm"))}}var ut=(()=>{class l{_chartService;_snackbar;router;_settingsService;watchlist=[];selectedMonitoringFilter="ACTIVEMONITORING";btcDivItemsFiltered=[];otherItemsFiltered=[];constructor(t,s,e,a){this._chartService=t,this._snackbar=s,this.router=e,this._settingsService=a}get btcDivItems(){return this.watchlist?.filter(t=>t.Status==="BTC-DIV")??[]}get otherItems(){return this.watchlist?.filter(t=>t.Status!=="BTC-DIV")??[]}applyMonitoringFilter(){this.computeFiltered()}ngOnInit(){this._chartService.getWatchlist().subscribe(t=>{this.watchlist=t,console.log("watchlist fetched:",this.watchlist),this.computeFiltered()})}goToChart(t,s){t&&this._chartService.getSymbols().subscribe(e=>{if(e){let a=e.find(K=>K.SymbolName==t);this._settingsService.dispatchAppAction(j.setSelectedSymbol({symbol:a}));let m=(s||"").trim(),h=t.trim();h&&m?this.router.navigate(["/chart",h,m]):h?this.router.navigate(["/chart",h]):this.router.navigate(["/chart"])}})}refresh(){this._chartService.getWatchlist().subscribe(t=>{this.watchlist=t,console.log("watchlist refreshed:",this.watchlist),this._snackbar.open("watchlist refreshed","Close",{duration:2e3}),this.computeFiltered()})}back(){window.history.back()}computeFiltered(){let t=this.selectedMonitoringFilter,s=this.btcDivItems,e=this.otherItems;t==="ACTIVEMONITORING"?e=e.filter(a=>(a.MonitoringStatus||"").toUpperCase()==="ACTIVEMONITORING"):t==="NO MONITORING"&&(e=e.filter(a=>!a.MonitoringStatus||a.MonitoringStatus.toUpperCase()==="NO MONITORING")),this.btcDivItemsFiltered=s,this.otherItemsFiltered=e}static \u0275fac=function(s){return new(s||l)(d(Y),d(U),d(E),d(H))};static \u0275cmp=v({type:l,selectors:[["app-watchlist"]],decls:24,vars:3,consts:[[1,"watchlist-container"],[1,"header-actions"],["mat-button","",3,"click"],["fontIcon","arrow_back"],["fontIcon","refresh"],[1,"spacer"],["appearance","outline",1,"monitoring-select","dense"],["placeholder","Monitoring",3,"valueChange","selectionChange","value"],["value","ALL"],["value","ACTIVEMONITORING"],["value","NO MONITORING"],[1,"scrollable-list"],[1,"group-label"],["class","watchlist-row-card",3,"click",4,"ngFor","ngForOf"],[1,"watchlist-row-card",3,"click"],[1,"row-top"],[1,"symbol"],[1,"timeframe"],[1,"row-bottom"],[1,"chip-list"],[3,"ngClass"],[1,"created"],["color","accent"]],template:function(s,e){s&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),p("click",function(){return e.back()}),f(3,"mat-icon",3),o(4," Back "),i(),n(5,"button",2),p("click",function(){return e.refresh()}),f(6,"mat-icon",4),o(7," Refresh "),i(),f(8,"span",5),n(9,"mat-form-field",6)(10,"mat-select",7),S("valueChange",function(m){return I(e.selectedMonitoringFilter,m)||(e.selectedMonitoringFilter=m),m}),p("selectionChange",function(){return e.applyMonitoringFilter()}),n(11,"mat-option",8),o(12,"ALL"),i(),n(13,"mat-option",9),o(14,"ACTIVEMONITORING"),i(),n(15,"mat-option",10),o(16,"NO MONITORING"),i()()()(),n(17,"div",11)(18,"h3",12),o(19,"BTC-DIV"),i(),M(20,Q,15,9,"mat-card",13),n(21,"h3",12),o(22,"Other"),i(),M(23,X,19,11,"mat-card",13),i()()),s&2&&(r(10),w("value",e.selectedMonitoringFilter),r(10),g("ngForOf",e.btcDivItemsFiltered),r(3),g("ngForOf",e.otherItemsFiltered))},dependencies:[F,y,k,A,V,W,J,$,q,R,z,D,N,L,G,B,T],styles:['.watchlist-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:var(--sys-surface-container-high, #181a20);color:var(--sys-on-surface, #ddd);padding-bottom:calc(var(--footer-height))}.scrollable-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px 12px 12px;box-sizing:border-box;scrollbar-width:thin}.group-label[_ngcontent-%COMP%]{margin:18px 0 6px;font-weight:600;font-size:13px;letter-spacing:.5px;color:var(--sys-on-surface-variant, #8a8f99);text-transform:uppercase;position:sticky;top:0;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);padding:4px 0}.watchlist-row-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px 14px 8px;margin:0 0 10px;background:var(--sys-surface-container, #20242b);border:1px solid #262a30;border-radius:12px;cursor:pointer;position:relative;transition:background .2s ease,transform .16s ease,box-shadow .16s ease;overflow:hidden}.watchlist-row-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(90deg,#ffffff0a,#fff0);opacity:0;transition:opacity .25s ease;pointer-events:none}.watchlist-row-card[_ngcontent-%COMP%]:hover{background:var(--sys-surface-container-high, #181a20);transform:translateY(-2px);box-shadow:0 4px 14px #00000059}.watchlist-row-card[_ngcontent-%COMP%]:hover:before{opacity:1}.watchlist-row-card[_ngcontent-%COMP%]:active{transform:translateY(0)}.row-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-weight:600;font-size:13px;color:var(--sys-on-surface, #eee)}.row-top[_ngcontent-%COMP%]   .timeframe[_ngcontent-%COMP%]{font-weight:500;color:#8a8f99}.row-bottom[_ngcontent-%COMP%]{margin-top:4px;display:flex;align-items:center;gap:8px}.row-bottom[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]{display:flex;gap:4px}.row-bottom[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{height:22px;font-size:12px;padding:0 6px}.row-bottom[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   .bear[_ngcontent-%COMP%], .row-bottom[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   .short[_ngcontent-%COMP%]{background:#e57373;color:#fff}.row-bottom[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   .bull[_ngcontent-%COMP%], .row-bottom[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   .long[_ngcontent-%COMP%]{background:#81c784;color:#fff}.row-bottom[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   .divergence[_ngcontent-%COMP%]{background:#64b5f6;color:#fff}.row-bottom[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]   .none[_ngcontent-%COMP%]{background:#bdbdbd;color:#fff}.row-bottom[_ngcontent-%COMP%]   .created[_ngcontent-%COMP%]{font-size:11px;color:#8a8f99;margin-left:auto;font-variant-numeric:tabular-nums}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:8px 8px 0;height:54px;position:sticky;top:0;z-index:10;background:var(--sys-surface-container-high, #181a20);border-bottom:1px solid var(--sys-outline, #222);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);padding:8px 4px}.header-actions[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]{height:34px;line-height:34px;font-size:13px;font-weight:500;color:var(--sys-on-surface, #eee);background:#ffffff0a;border:1px solid #2a2d33;border-radius:8px;padding:0 14px;transition:background .2s ease,transform .2s ease,box-shadow .2s ease;text-transform:capitalize}.header-actions[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]:hover{background:#ffffff14;transform:translateY(-1px)}.header-actions[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]:active{background:#ffffff1f;transform:translateY(0)}.header-actions[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}.header-actions[_ngcontent-%COMP%]   .monitoring-select.mat-mdc-form-field.dense[_ngcontent-%COMP%]{max-width:230px;height:65px}.header-actions[_ngcontent-%COMP%]   .monitoring-select.mat-mdc-form-field.dense[_ngcontent-%COMP%]   .mat-mdc-form-field-flex[_ngcontent-%COMP%]{min-height:34px;height:34px;padding:0 10px!important}.header-actions[_ngcontent-%COMP%]   .monitoring-select.mat-mdc-form-field.dense[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:0!important;min-height:34px!important}.header-actions[_ngcontent-%COMP%]   .monitoring-select.mat-mdc-form-field.dense[_ngcontent-%COMP%]   .mat-mdc-select-trigger[_ngcontent-%COMP%]{height:34px;display:flex;align-items:center}.header-actions[_ngcontent-%COMP%]   .monitoring-select.mat-mdc-form-field.dense[_ngcontent-%COMP%]   .mat-mdc-select-value[_ngcontent-%COMP%], .header-actions[_ngcontent-%COMP%]   .monitoring-select.mat-mdc-form-field.dense[_ngcontent-%COMP%]   .mat-mdc-select-placeholder[_ngcontent-%COMP%]{font-size:13px}.header-actions[_ngcontent-%COMP%]   .monitoring-select.mat-mdc-form-field.dense[_ngcontent-%COMP%]   .mat-mdc-form-field-outline-start[_ngcontent-%COMP%], .header-actions[_ngcontent-%COMP%]   .monitoring-select.mat-mdc-form-field.dense[_ngcontent-%COMP%]   .mat-mdc-form-field-outline-end[_ngcontent-%COMP%]{height:34px}.chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-weight:500;letter-spacing:.3px;border-radius:6px!important}.chip-list[_ngcontent-%COMP%]   mat-chip.bear[_ngcontent-%COMP%], .chip-list[_ngcontent-%COMP%]   mat-chip.short[_ngcontent-%COMP%]{background:#b04141}.chip-list[_ngcontent-%COMP%]   mat-chip.bull[_ngcontent-%COMP%], .chip-list[_ngcontent-%COMP%]   mat-chip.long[_ngcontent-%COMP%]{background:#2e7d32}.chip-list[_ngcontent-%COMP%]   mat-chip.divergence[_ngcontent-%COMP%]{background:#1565c0}.chip-list[_ngcontent-%COMP%]   mat-chip.none[_ngcontent-%COMP%]{background:#616161}@media (max-width: 600px){.watchlist-row-card[_ngcontent-%COMP%]{padding:8px 10px 6px;border-radius:10px}.row-top[_ngcontent-%COMP%]{font-size:12px}.header-actions[_ngcontent-%COMP%]{height:50px}.group-label[_ngcontent-%COMP%]{font-size:12px}}']})}return l})();export{ut as WatchlistComponent};
